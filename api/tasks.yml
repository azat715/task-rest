openapi: 3.0.0
info:
  version: '1'
  title: 'Golang task rest api'
  license:
    name: MIT
servers:
  - url: 'localhost:8002'
paths:
  /tasks/{taskid}:
    get:
        summary: 'Get task by id'
        parameters:
            - in: path
              name: taskid
              required: true
              schema:
                  type: string
                  minimum: 1

        responses:
            '200':
                description: 'Task'
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/Task'

    delete:
        summary: 'Delete task by id'
        parameters:
            - in: path
              name: taskid
              required: true
              schema:
                  type: string
                  minimum: 1
        responses:
            '200':
                description: 'Delete task'


  /tasks:
    delete:
        summary: 'Delete task or tasks'
        responses:
            '200':
                description: 'Delete all task'
          
    post:
        summary: 'Create task'
        requestBody:
            description: Task
            required: true
            content:
                application/json:
                    schema:
                        $ref: '#/components/schemas/Task'
        responses:
            '201':
                description: 'Created Task'
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/Task'
          
    get:
      summary: 'List of tasks'
      parameters:
          - in: query
            name: tag
            required: false
            schema:
                type: string
                minimum: 1
          - in: query
            name: date
            required: false
            schema:
                type: string
                format: date
                minimum: 1

      responses:
        '200':
          description: 'List of tasks'
          content:
            application/json:
              schema:
                  type: array 
                  items: {
                    $ref: '#/components/schemas/Task'
                  }
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error' 
components:
  schemas:
    Task:
      type: object
      required:
        - id
        - text
        - tags
        - date
        - done
      properties:
        id:
          type: integer
          format: int
        text:
          type: string
        tags:
          type: array
          items: {
              type: string
          }
        date:
            type: string
            format: date
